# heart-geometry-map
å¿ƒã‚’å†’é™ºåœ°å›³ã«å¤‰ãˆã‚‹ã€é©æ–°çš„ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ã‚¢ãƒ—ãƒªï¼ æ¯æ—¥ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§ã€Œå®‰å¿ƒã€ã€Œä¸å®‰ã€ã€Œå¸Œæœ›ã€ãªã©ã®æ„Ÿæƒ…ã‚’ãƒãƒãƒãƒå…¥åŠ›ã™ã‚‹ã ã‘ã€‚æ„Ÿæƒ…ã®å¼·ã•ãŒã€Œç§»å‹•è·é›¢ã€ã€ç¨®é¡ãŒã€Œæ–¹å‘ã€ã«ãªã‚Šã€2Dè»Œè·¡ãŒã‚¯ãƒã‚¯ãƒæã‹ã‚Œã¦ã€å¿ƒã®æ—…è·¯ãŒä¸€ç›®ç­ç„¶ã€‚ã†ã¤ã®ãƒ«ãƒ¼ãƒ—ã€å›å¾©ã®å‰é€²ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®åã‚Šã‚’è¦–è¦šåŒ–ã€‚å¾“æ¥ã®ã€Œç‚¹ã€ã‚¹ã‚³ã‚¢ã˜ã‚ƒãªãã€ã€Œç·šã€ã®ç‰©èªã§å¿ƒã®ãƒ€ã‚¤ãƒŠãƒŸã‚¯ã‚¹ã‚’æ‰ãˆã‚‹ï¼ ã‚­ãƒ£ãƒ©é¸æŠï¼ˆğŸ±ğŸ¤–ãªã©ï¼‰&amp;ãƒ©ãƒ³ãƒ€ãƒ ğŸ€ã‚¤ãƒ™ãƒ³ãƒˆã§ãƒ¢ãƒãƒ™UPã€‚ ä½¿ã„æ–¹: ãƒ–ãƒ©ã‚¦ã‚¶ã‚¢ã‚¯ã‚»ã‚¹ã€ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼èª¿æ•´â†’è¨˜éŒ²ã§åœ°å›³æ›´æ–°ã€‚ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆJSONä¿å­˜ã€‚ ğŸ”§ æŠ€è¡“: Python (Flask, Pandas, Plotly) ã®è»½é‡ãƒ™ã‚¯ãƒˆãƒ«åˆæˆã€‚ ğŸ“œ CC0ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ‰ãƒ¡ã‚¤ãƒ³: èª°ã§ã‚‚è‡ªç”±ã«æ”¹è‰¯ãƒ»ã‚¢ãƒ—ãƒªåŒ–OKã€‚MLè¨ºæ–­ã‚„ãƒ¢ãƒã‚¤ãƒ«ç‰ˆã‚’ä¸€ç·’ã«ä½œã‚ã†ã‚‰
# ã‚¨ãƒ¢ãƒ»ãƒŠãƒ“ ğŸ§­ å¿ƒã®å¹¾ä½•å­¦ã™ã”ã‚ã

## æ¦‚è¦
å¿ƒã®æ„Ÿæƒ…ã‚’ã€Œæ–¹å‘ã¨è·é›¢ã€ã§åœ°å›³åŒ–ã™ã‚‹ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ã‚¢ãƒ—ãƒªã€‚æ¯æ—¥ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§æ„Ÿæƒ…ã‚¹ã‚³ã‚¢å…¥åŠ›ã™ã‚‹ã¨ã€2Dè»Œè·¡ãŒæã‹ã‚Œã¦å¿ƒã®æ—…è·¯ãŒè¦‹ãˆã‚‹ã€‚ã†ã¤å‚¾å‘ï¼ˆãƒ«ãƒ¼ãƒ—ï¼‰ã‚„å›å¾©ï¼ˆå‰é€²ï¼‰ã‚’è¦–è¦šåŒ–ã€‚

## è§£æ±ºèª²é¡Œ
- ãƒ¡ãƒ³ã‚¿ãƒ«è¨ºæ–­ã®ã€Œç‚¹ã€ã§ã¯ãªãã€Œç·šã€ã§å‹•ãã‚’æ‰ãˆã‚‹ã€‚
- è‡ªå·±èªè­˜ã‚’æ¥½ã—ãï¼ˆã‚­ãƒ£ãƒ©é¸æŠã€ğŸ€ã‚¤ãƒ™ãƒ³ãƒˆï¼‰ã€‚

## ä½¿ã„æ–¹
- Flaskã§ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œ: `python app.py`
- ãƒ–ãƒ©ã‚¦ã‚¶ã§http://localhost:9500/ ã‚¢ã‚¯ã‚»ã‚¹ã€‚
- æ„Ÿæƒ…ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼èª¿æ•´â†’è¨˜éŒ²â†’åœ°å›³è¡¨ç¤ºã€‚

## æŠ€è¡“
- Python: Flask, Pandas, Plotly
- ãƒ‡ãƒ¼ã‚¿: JSONä¿å­˜
- ãƒ™ã‚¯ãƒˆãƒ«: æ„Ÿæƒ…ç¨®é¡=æ–¹å‘ã€å¼·ã•=è·é›¢

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹
CC0 (ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒ‰ãƒ¡ã‚¤ãƒ³) - è‡ªç”±ã«ä½¿ã£ã¦ã€æ”¹è‰¯ãƒ»é…å¸ƒOKã€‚ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ã‚’ä¸–ç•Œã«ï¼

---

# Emo-Navi ğŸ§­ Heart Geometry Sugoroku

## Overview
A mental health app that maps emotions as "direction and distance" on a 2D trail. Input daily emotion scores via sliders, and visualize your heart's journey. Detect patterns like depression loops or recovery progress.

## Problems Solved
- From "points" to "lines" for mental tracking.
- Fun self-awareness with character selection and random events (ğŸ€).

## Usage
- Run locally with Flask: `python app.py`
- Access http://localhost:9500/ in browser.
- Adjust sliders â†’ Record â†’ View map.

## Tech
- Python: Flask, Pandas, Plotly
- Data: JSON storage
- Vectors: Emotion type = direction, intensity = distance

## License
CC0 (Public Domain) - Free to use, modify, distribute. Change mental health worldwide!

from flask import Flask, request, render_template_string
import pandas as pd
import plotly.graph_objects as go
import random
import os
from datetime import datetime

app = Flask(__name__)

DATA_FILE = "emotion_data.json"

# ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
if os.path.exists(DATA_FILE):
    df = pd.read_json(DATA_FILE)
else:
    df = pd.DataFrame(columns=[
        "Date", "calm", "hope", "fear", "anger", "void", "lonely", "normal", "Character"
    ])

# HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
HTML = """
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>å¿ƒã®è¶³ã‚ã¨ ğŸ¾</title>
<style>
body { font-family: Arial; background: #1a1a1a; color: #fff; text-align: center; padding: 10px; }
h1 { font-size: 24px; }
input[type=range] { width: 80%; }
.character { font-size: 24px; margin: 5px; }
button { padding: 5px 10px; margin: 5px; border-radius: 5px; }
.slider-label { display: block; margin-top: 10px; }
.feedback { margin-top: 10px; color: #fcd34d; font-weight: bold; }
</style>
</head>
<body>
<h1>å¿ƒã®è¶³ã‚ã¨ ğŸ¾</h1>
<form method="POST">
<div>
    <h3>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼</h3>
    {% for c in characters %}
        <label><input type="radio" name="character" value="{{c}}" required class="character">{{c}}</label>
    {% endfor %}
</div>
<div>
    {% for key, label in emotions.items() %}
        <label class="slider-label">{{label}} <input type="range" name="{{key}}" min="0" max="1" step="0.1" value="0.5"></label>
    {% endfor %}
</div>
<label>æ—¥ä»˜ <input type="date" name="date" value="{{date}}"></label>
<br>
<button type="submit">è¨˜éŒ²</button>
</form>
<div class="feedback">{{feedback|safe}}</div>
<div>{{plot|safe}}</div>
</body>
</html>
"""

# ã‚­ãƒ£ãƒ©ãƒ»æ„Ÿæƒ…å®šç¾©
CHARACTERS = ["ğŸ±","ğŸ¤–","ğŸ»","ğŸ¥","ğŸ•ï¸","ğŸ‘"]
EMOTIONS = {
    "calm":"å®‰å¿ƒ", "hope":"å¸Œæœ›", "fear":"ä¸å®‰", "anger":"æ€’ã‚Š",
    "void":"è™šç„¡", "lonely":"å­¤ç‹¬", "normal":"ã„ã¤ã‚‚é€šã‚Š"
}
DIRECTIONS = {
    "calm":(0,1), "hope":(1,1), "fear":(1,0), "anger":(0,-1),
    "void":(-1,-1), "lonely":(-1,0), "normal":(-0.5,0.5)
}
EVENTS = ["ğŸ€ ã‚¯ãƒ­ãƒ¼ãƒãƒ¼ã‚’è¦‹ã¤ã‘ãŸï¼", "ğŸŒ· ãŠèŠ±ãŒå’²ã„ã¦ãŸï¼", "ğŸ¾ è¶³è·¡ã‚’ç™ºè¦‹ï¼"]

@app.route("/", methods=["GET","POST"])
def index():
    global df
    feedback = "ä»Šæ—¥ã®ä¸€æ­©ã‚’æ­©ã“ã†ï¼ğŸ¾"
    plot_div = ""
    date = datetime.today().strftime("%Y-%m-%d")

    if request.method == "POST":
        # å…¥åŠ›å–å¾—
        character = request.form["character"]
        step_data = {"Date": request.form.get("date", date), "Character": character}
        for key in EMOTIONS.keys():
            step_data[key] = float(request.form.get(key,0.5))

        # ã‚­ãƒ£ãƒ©è£œæ­£
        if character=="ğŸ±": step_data["hope"] = min(1, step_data["hope"]+0.1)
        elif character=="ğŸ¤–": step_data["fear"] = max(0, step_data["fear"]-0.1)
        elif character=="ğŸ»": step_data["anger"] = min(1, step_data["anger"]+0.1)

        # ãƒ‡ãƒ¼ã‚¿è¿½åŠ ãƒ»ä¿å­˜
        df = pd.concat([df, pd.DataFrame([step_data])], ignore_index=True)
        df = df.tail(7)
        df.to_json(DATA_FILE, force_ascii=False)

        # è»Œè·¡è¨ˆç®—
        trail = [(0,0)]
        for _, row in df.iterrows():
            x,y = trail[-1]
            for e in EMOTIONS.keys():
                dx,dy = DIRECTIONS[e]
                x += dx * row[e]
                y += dy * row[e]
            trail.append((x,y))
        # ãƒ©ãƒ³ãƒ€ãƒ ã‚¤ãƒ™ãƒ³ãƒˆ
        event_msg = ""
        if random.random() < 0.2:
            event_msg = random.choice(EVENTS)
        # é€£ç¶šãƒœãƒ¼ãƒŠã‚¹
        bonus_msg = ""
        if len(df)>=3: bonus_msg += "ğŸŒŸ 3æ—¥é€£ç¶šã§æ­©ã‘ã¦ã‚‹ï¼"
        if len(df)>=5: bonus_msg += "ğŸŒŸ 5æ—¥é€£ç¶šã§æ­©ã‘ã¦ã‚‹ï¼"

        feedback = f"{character} ãŒæ­©ã„ãŸã‚ˆï¼ğŸ¾ {event_msg} {bonus_msg}"

        # Plotlyæç”»
        fig = go.Figure()
        fig.add_trace(go.Scatter(
            x=[p[0] for p in trail], y=[p[1] for p in trail],
            mode="lines+markers",
            line=dict(color="lightblue", width=3),
            marker=dict(size=6, color="cyan")
        ))
        fig.add_trace(go.Scatter(
            x=[trail[-1][0]], y=[trail[-1][1]],
            mode="markers+text", text=[character], textposition="top center",
            marker=dict(size=20, color="gold")
        ))
        plot_div = fig.to_html(full_html=False)

    return render_template_string(HTML, characters=CHARACTERS, emotions=EMOTIONS, plot=plot_div, feedback=feedback, date=date)

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=9500, debug=True)
